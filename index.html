<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ARC Raiders Loot Manager - Auto Save</title>
    <style>
        :root {
            --bg-color: #0b0c10;
            --card-bg: #1f2833;
            --primary: #66fcf1;
            --accent: #45a29e;
            --text: #c5c6c7;
        }

        body { background-color: var(--bg-color); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        
        #wishlist-container {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(31, 40, 51, 0.98);
            border-bottom: 2px solid var(--primary);
            padding: 10px 20px; min-height: 85px;
            backdrop-filter: blur(15px);
            display: flex; flex-direction: column;
            box-shadow: 0 4px 20px rgba(0,0,0,0.6);
        }
        .wishlist-flex { display: flex; gap: 15px; overflow-x: auto; padding: 10px 0; scrollbar-width: thin; }
        
        .wishlist-item { 
            background: var(--bg-color); border: 1px solid var(--primary);
            padding: 5px 12px; border-radius: 10px; font-size: 0.8rem;
            white-space: nowrap; display: flex; align-items: center; gap: 8px;
        }
        .wishlist-icon { width: 30px; height: 30px; background: #000; border-radius: 4px; object-fit: contain; border: 1px solid #444; }
        .wishlist-price { color: var(--primary); font-weight: bold; font-size: 0.75rem; border-left: 1px solid #555; padding-left: 8px; }

        .container { max-width: 1300px; margin: 140px auto 40px; padding: 0 15px; }
        h2 { color: var(--primary); text-align: center; margin-bottom: 30px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
        .card { 
            background: var(--card-bg); border: 1px solid var(--accent);
            border-radius: 12px; padding: 12px; text-align: center;
            position: relative; transition: 0.2s;
        }
        .card.checked { border: 2px solid var(--primary); background: #23313d; }
        .check-btn { position: absolute; top: 10px; right: 10px; width: 18px; height: 18px; cursor: pointer; z-index: 2; }

        .img-box { width: 90px; height: 90px; margin: 5px auto; display: flex; align-items: center; justify-content: center; background: #000; border-radius: 8px; }
        .img-box img { max-width: 100%; max-height: 100%; object-fit: contain; }

        .name { font-size: 0.8rem; font-weight: bold; margin: 8px 0; height: 35px; display: flex; align-items: center; justify-content: center; line-height: 1.2; overflow: hidden; color: #fff; }
        .price { color: var(--primary); font-size: 1rem; font-weight: bold; }
        .tier { font-size: 0.65rem; padding: 2px 5px; border-radius: 3px; margin-top: 5px; display: inline-block; color: #fff; }
        .S { background: #e74c3c; } .A { background: #f39c12; } .B { background: #3498db; } .C { background: #7f8c8d; }
    </style>
</head>
<body>

<div id="wishlist-container">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: 0.85rem; color: var(--primary); font-weight: bold;">⭐ 선호 파밍 리스트 (총 가치: <span id="total-value">0</span>)</span>
        <button onclick="clearStorage()" style="background:none; border: 1px solid #555; color: #aaa; cursor: pointer; font-size: 0.7rem; border-radius: 3px; padding: 2px 5px;">초기화</button>
    </div>
    <div class="wishlist-flex" id="wishlist"></div>
</div>

<div class="container">
    <h2>ARC RAIDERS FULL DATABASE</h2>
    <div class="grid" id="mainGrid"></div>
</div>

<script>
    const IMAGE_FOLDER = "arc_raiders_images"; 
    const STORAGE_KEY = "arc_raiders_wishlist";

    // 데이터 전체 포함 (78개)
    const lootItems = [
{ id: 1, name: "Snap Hook", price: 14000, tier: "S" },
        { id: 2, name: "Queen Reactor", price: 13000, tier: "S" },
        { id: 3, name: "Matriarch Reactor", price: 13000, tier: "S" },
        { id: 4, name: "Lance's Mixtape (5th Edition)", price: 10000, tier: "S" },
        { id: 5, name: "Kinetic Converter", price: 7000, tier: "S" },
        { id: 6, name: "Anvil Splitter", price: 7000, tier: "S" },
        { id: 7, name: "Breathtaking Snow Globe", price: 7000, tier: "S" },
        { id: 8, name: "Horizontal Grip", price: 7000, tier: "S" },
        { id: 9, name: "Silencer III", price: 7000, tier: "S" },
        { id: 10, name: "Ion Sputter", price: 6000, tier: "S" },
        { id: 11, name: "Magnetron", price: 6000, tier: "S" },
        { id: 12, name: "Magnetic Accelerator", price: 5500, tier: "S" },
        { id: 13, name: "Power Rod", price: 5500, tier: "S" },
        { id: 14, name: "Heavy Shield", price: 5500, tier: "S" },
        { id: 15, name: "Explosive Mine Blueprint", price: 5000, tier: "S" },
        { id: 16, name: "Leaper Pulse Unit", price: 5000, tier: "S" },
        { id: 17, name: "Venator Blueprint", price: 5000, tier: "S" },
        { id: 18, name: "Angled Grip III", price: 5000, tier: "S" },
        { id: 19, name: "Vulcano Blueprint", price: 5000, tier: "S" },
        { id: 20, name: "Music Box", price: 5000, tier: "S" },
        { id: 21, name: "Red Coral Jewelry", price: 5000, tier: "S" },
        { id: 22, name: "Playing Cards", price: 5000, tier: "S" },
        { id: 23, name: "Bastion Cell", price: 5000, tier: "S" },
        { id: 24, name: "WolfPack", price: 5000, tier: "S" },
        { id: 25, name: "Deadline", price: 5000, tier: "S" },
        { id: 26, name: "Spectrum Analyzer", price: 3500, tier: "A" },
        { id: 27, name: "Geiger Counter", price: 3500, tier: "A" },
        { id: 28, name: "Silver Teaspoon Set", price: 3000, tier: "A" },
        { id: 29, name: "Statuette", price: 3000, tier: "A" },
        { id: 30, name: "Flow Controller", price: 3000, tier: "A" },
        { id: 31, name: "Microscope", price: 3000, tier: "A" },
        { id: 32, name: "Music Album", price: 3000, tier: "A" },
        { id: 33, name: "Frequency Modulation Box", price: 3000, tier: "A" },
        { id: 34, name: "Fine Wristwatch", price: 3000, tier: "A" },
        { id: 35, name: "Vita Spray", price: 2880, tier: "B" },
        { id: 36, name: "Exodus Modules", price: 2750, tier: "B" },
        { id: 37, name: "Bison Driver", price: 2500, tier: "B" },
        { id: 38, name: "Showstopper", price: 2200, tier: "B" },
        { id: 39, name: "Pottery", price: 2000, tier: "B" },
        { id: 40, name: "Very Comfortable Pillow", price: 2000, tier: "B" },
        { id: 41, name: "Turbo Pump", price: 2000, tier: "B" },
        { id: 42, name: "Laboratory Reagents", price: 2000, tier: "B" },
        { id: 43, name: "Snitch Scanner", price: 2000, tier: "B" },
        { id: 44, name: "Cooling Fan", price: 2000, tier: "B" },
        { id: 45, name: "Medium Shield", price: 2000, tier: "B" },
        { id: 46, name: "Rocket Thruster", price: 2000, tier: "B" },
        { id: 47, name: "Motor", price: 2000, tier: "B" },
        { id: 48, name: "Portable TV", price: 2000, tier: "B" },
        { id: 49, name: "Rosary", price: 2000, tier: "B" },
        { id: 50, name: "Advanced Electrical Components", price: 1750, tier: "B" },
        { id: 51, name: "Mod Components", price: 1750, tier: "B" },
        { id: 52, name: "Trailblazer Grenade", price: 1600, tier: "B" },
        { id: 53, name: "Explosive Mine", price: 1500, tier: "B" },
        { id: 54, name: "Surge Shield Recharger", price: 1200, tier: "B" },
        { id: 55, name: "ARC Flex Rubber", price: 1000, tier: "C" },
        { id: 56, name: "Broken Flashlight", price: 1000, tier: "C" },
        { id: 57, name: "Torn Book", price: 1000, tier: "C" },
        { id: 58, name: "Explosive Compound", price: 1000, tier: "C" },
        { id: 59, name: "Remote Control", price: 1000, tier: "C" },
        { id: 60, name: "Garlic Press", price: 1000, tier: "C" },
        { id: 61, name: "Zipline", price: 1000, tier: "C" },
        { id: 62, name: "Antiseptic", price: 1000, tier: "C" },
        { id: 63, name: "Smoke Grenade", price: 1000, tier: "C" },
        { id: 64, name: "ARC Motion Core", price: 1000, tier: "C" },
        { id: 65, name: "ARC Circuitry", price: 1000, tier: "C" },
        { id: 66, name: "Industrial Battery", price: 1000, tier: "C" },
        { id: 67, name: "Rubber Duck", price: 1000, tier: "C" },
        { id: 68, name: "Radio", price: 1000, tier: "C" },
        { id: 69, name: "Agave", price: 1000, tier: "C" },
        { id: 70, name: "Coolant", price: 1000, tier: "C" },
        { id: 71, name: "Empty Wine Bottle", price: 1000, tier: "C" },
        { id: 72, name: "Mushroom", price: 1000, tier: "C" },
        { id: 73, name: "Defibrillator", price: 1000, tier: "C" },
        { id: 74, name: "Jolt Mine", price: 850, tier: "C" },
        { id: 75, name: "Shrapnel Grenade", price: 800, tier: "C" },
        { id: 76, name: "Heavy Gun Parts", price: 700, tier: "C" },
        { id: 77, name: "Light Gun Parts", price: 700, tier: "C" },
        { id: 78, name: "Mechanical Components", price: 640, tier: "C" }
    ];

    let selectedItems = new Set();

    // 1. 페이지 로드 시 로컬 스토리지 데이터 불러오기
    function init() {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            selectedItems = new Set(JSON.parse(saved));
        }
        renderGrid();
        updateWishlist();
    }

    // 2. 위시리스트 업데이트 및 로컬 스토리지 저장
    function updateWishlist() {
        const wishlistEl = document.getElementById('wishlist');
        const totalValueEl = document.getElementById('total-value');
        wishlistEl.innerHTML = '';
        
        let totalValue = 0;
        const selected = lootItems.filter(item => selectedItems.has(item.id));

        if (selected.length === 0) {
            wishlistEl.innerHTML = '<span style="color: #666; font-size: 0.8rem;">아이템을 선택해 주세요.</span>';
            totalValueEl.innerText = '0';
        } else {
            selected.forEach(item => {
                totalValue += item.price;
                const safeName = item.name.replace(/[\\/:*?"<>|]/g, '');
                const div = document.createElement('div');
                div.className = 'wishlist-item';
                div.innerHTML = `
                    <img src="${IMAGE_FOLDER}/${safeName}.webp" class="wishlist-icon" onerror="this.src='https://via.placeholder.com/30?text=?';">
                    <span>${item.name}</span>
                    <span class="wishlist-price">${item.price.toLocaleString()}</span>
                `;
                wishlistEl.appendChild(div);
            });
            totalValueEl.innerText = totalValue.toLocaleString();
        }
        // 로컬 스토리지 업데이트
        localStorage.setItem(STORAGE_KEY, JSON.stringify([...selectedItems]));
    }

    function toggleItem(id, cardEl) {
        if (selectedItems.has(id)) {
            selectedItems.delete(id);
            cardEl.classList.remove('checked');
        } else {
            selectedItems.add(id);
            cardEl.classList.add('checked');
        }
        updateWishlist();
    }

    // 초기화 버튼
    function clearStorage() {
        if(confirm("모든 선택 내역을 초기화하시겠습니까?")) {
            selectedItems.clear();
            document.querySelectorAll('.card').forEach(c => c.classList.remove('checked'));
            document.querySelectorAll('.check-btn').forEach(b => b.checked = false);
            updateWishlist();
        }
    }

    // 전체 그리드 렌더링
    function renderGrid() {
        const mainGrid = document.getElementById('mainGrid');
        lootItems.sort((a,b) => b.price - a.price).forEach(item => {
            const isChecked = selectedItems.has(item.id);
            const card = document.createElement('div');
            card.className = `card ${isChecked ? 'checked' : ''}`;
            
            const safeName = item.name.replace(/[\\/:*?"<>|]/g, '');
            const imgSrc = `${IMAGE_FOLDER}/${safeName}.webp`;

            card.innerHTML = `
                <input type="checkbox" class="check-btn" ${isChecked ? 'checked' : ''} onchange="toggleItem(${item.id}, this.parentNode)">
                <div class="img-box"><img src="${imgSrc}" loading="lazy" onerror="this.onerror=null; this.src='https://via.placeholder.com/90x90?text=?';"></div>
                <div class="name">${item.name}</div>
                <div class="price">${item.price.toLocaleString()}</div>
                <div class="tier ${item.tier}">${item.tier} Tier</div>
            `;
            mainGrid.appendChild(card);
        });
    }

    init(); // 실행
</script>
</body>
</html>